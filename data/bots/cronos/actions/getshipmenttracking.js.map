{"version":3,"sources":["../bot-templates/weatherbot/actions/getweather.js"],"names":["axios","require","myAction","config","bp","getModuleConfig","prefix","serial","event","payload","text","response","get","error","status","Error","data","origin","dest","destination","status","airport","time_stamp","weight","serial","prefix","volume","pieces","lastposition","laststatus","awbnumber","airlinecode","updatetime","awb_info","status_info"],"mappings":";;AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;AAEA;;;;;;;;AAMA,MAAMC,QAAQ,GAAG,YAAY;AAC3B,QAAMC,MAAM,GAAG,MAAMC,EAAE,CAACD,MAAH,CAAUE,eAAV,CAA0B,UAA1B,CAArB;AACA,QAAMC,MAAM,GAAGH,MAAM,CAACI,iBAAtB;AACA,QAAMC,KAAK,GAAGC,KAAK,CAACC,OAAN,CAAcC,IAA5B;AAEA,MAAIC,QAAJ;;AACA,MAAI;AACFA,IAAAA,QAAQ,GAAG,MAAMZ,KAAK,CAACa,GAAN,CAAW,oDAAmDL,KAAM,uBAAsBF,MAAO,EAAjG,CAAjB;AACD,GAFD,CAEE,OAAOQ,KAAP,EAAc;AACd,QAAIA,KAAK,CAACF,QAAN,IAAkBE,KAAK,CAACF,QAAN,CAAeG,MAAf,KAA0B,GAAhD,EAAqD;AACnD,YAAM,IAAIC,KAAJ,CAAU,yFAAV,CAAN;AACD;;AACD,UAAMF,KAAN;AACD;;AAED,QAAMG,IAAI,GAAGL,QAAQ,CAACM,IAAT,CAAcC,IAA3B;AACA,QAAMC,OAAO,GAAGR,QAAQ,CAACM,IAAT,CAAcG,GAAd,CAAkBD,OAAlC;AACA,QAAME,WAAW,GAAGV,QAAQ,CAACM,IAAT,CAAcK,IAAd,CAAmBC,IAAvC;AACA,QAAMC,WAAW,GAAGb,QAAQ,CAACM,IAAT,CAAcQ,OAAd,CAAsB,CAAtB,EAAyBD,WAA7C;AAEAD,EAAAA,IAAI,CAACE,OAAL,GAAe;AAAET,IAAAA,IAAF;AAAQG,IAAAA,OAAR;AAAiBE,IAAAA,WAAjB;AAA8BG,IAAAA;AAA9B,GAAf;AACD,CArBD;;AAuBA,OAAOvB,QAAQ,EAAf","sourceRoot":"/var/lib/jenkins/workspace/build-windows/modules/examples/src/backend","sourcesContent":["const axios = require('axios')\n\n/**\n * Gets shipment status\n *  @title Get Shipment status\n * @category Shipment tracking\n * @author Kronos\n */\nconst myAction = async () => {\n  const config = await bp.config.getModuleConfig('examples')\n    // const apiKey = config.openWeatherApiKey;\n  // const query = event.payload.text;\n\n  let response\n  try {\n    response = await axios.get(`https://back-end-2.azurewebsites.net/getAWB?serial=${serial}&prefix=${prefix}`)\n  } catch (error) {\n    if (error.response && error.response.status === 401) {\n      throw new Error('Request failed with status code 401. Have you set up your OpenWeather API Key properly?')\n    }\n    throw error\n  }\n\nconst origin = response.data.awb_info.origin\n  const destination = response.data.awb_info.dest\n  const updatetime = response.data.awb_info.status_info.time_stamp\n  const laststatus = response.data.awb_info.status_info.status\n const lastposition = response.data.awb_info.status_info.airport\n const awbnumber = response.data.awb_info.serial\n    const airlinecode = response.data.awb_info.prefix\n  const weight = response.data.awb_info.weight\n    const volume = response.data.awb_info.volume\n  const pieces = response.data.awb_info.pieces\n\n  temp.status = { origin, destination, updatetime, laststatus, lastposition, awbnumber, airlinecode, weight, volume, pieces }\n}\n\nreturn myAction()\n"]}